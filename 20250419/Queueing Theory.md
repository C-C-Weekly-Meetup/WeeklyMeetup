# Introduction
* Queueing Theory란 한정된 자원을 가진 시스템의 대기열 관리를 수학적으로 분석하는 이론
* 라우터에서의 큐를 집중적으로 다룰 예정

# 네트워크 이론

## 네트워크 구성요소 
![](https://i.imgur.com/d0Sk3jU.png)

* 네트워크를 구성하는 요소들로 분리하여 네트워크가 무엇인지 파악하는 방법
* 네트워크의 구성요소
	* 종단 시스템
		* 네트워크의 가장자리에서 동작하는 컴퓨터
		* 네트워크와 연결되어 응용 프로그램을 수행
		* e.g., 데스크탑 컴퓨터, 노트북, 스마트폰, 냉장고, etc
	* 라우터
		* 네트워크의 구성요소로 더 일반적인 용어는 패킷 스위치
			* 패킷 스위치는 2계층 스위치를 포함
		* 데이터의 조각인 패킷을 받아서
			* IP를 확인하고
			* 해당 위치를 향해 전달
	* 링크
		* 호스트 간 연결 통로
		* 무선 연결
			* e.g., 동축 케이블, 광섬유, ...
		* 유선 연결

## 라우터가 하는 일 
* IP 프로토콜 수행
	* 패킷의 IP 목적지 확인
	* 만약 자신이 목적지라면?
		* 상위 계층으로 send up
	* 만약 자신이 목적지가 아니라면?
		* 이를 전달해줄 수 있는 다른 라우터로 전송
* 라우팅 프로토콜 수행
	* 연결된 다른 라우터와 협력하여 라우팅 테이블 구성
	* 혼잡이 발생하면 경로를 수정

## 네트워크 성능
* 하나의 패킷이 다른 노드에 도착하기까지..
	* 전송 시간*Transfer Rate*
		* 링크를 통해 비트를 밀어내는데 필요한 시간
		* Packet Length / Link Bandwidth 
	* 전파 시간*Propagation Delay*
		* 비트가 링크를 타고 다른 노드까지 도착하는데에 필요한 시간
		* Distance / Speed
	* 처리 시간*Processing Delay*
		* 도착한 패킷의 헤더를 확인하여 알맞은 큐에 넣는데 까지 걸리는 시간
	* 큐잉 대기 시간*Queueing Delay*
		* 링크를 통해 발사되기 까지 기다리는 시간
* 전송 시간, 전파 시간, 처리 시간은
	* 결정적이거나 (예측이 가능하거나)
	* 무시할 정도로 작다.
* 허나 큐잉 대기 시간은
	* 네트워크의 혼잡도에 따라 달라진다.
	* 비결정적이다. *non-deterministic*
* 따라서 큐잉 대기 시간을 잘 관리하는 것이 컴퓨터 공학도의 큰 과제

# Queueing Theory
* 큐잉 대기 시간을 수학적으로 분석해보자
* 큐의 길이는 무한하다고 가정
* 큐잉 대기 시간에 영향을 미치는 요소는 무엇일까?
* 패킷이 얼마나 자주 들어오느냐?
	* 초당 들어오는 패킷 수 => n/sec
* 패킷의 평균 크기는?
	* 평균 패킷 크기(비트 개수) => L
* 이것으로, 우리는 '트래픽 강도*traffic intensity*'를 도출할 수 있다.
	* 트래픽 강도 = L * n/sec 
* 트래픽 강도는 다르게 말하면, '초 당 들어오는 비트 수'
* Transfer Rate = 초 당 내보낼 수 있는 비트 수 => t/sec
* 그럼 다음과 같은 식을 만들 수 있다.
	* 초 당 들어오는 비트 / 초 당 내보낼 수 있는 비트
$$ T =  \frac{L * n}{t} $$
* 만약 T가 1보다 크다면?
	* 들어오는 비트가 처리될 수 있는 비트보다 많음
	* 패킷이 들어오는 속도보다 처리되는 속도가 느림
	* 불안정한 시스템. 수많은 패킷들이 버려짐
* 만약 T가 0에 가깝다면?
	* 들어오는 비트 수가 내보낼 수 있는 비트 수보다 현저히 작음
	* 대부분의 패킷은 큐잉 대기 시간을 겪지 않고 바로 전송됨
* 만약 T가 1이라면
	* 들어오는 비트 수와 나가는 비트 수가 동일!
	* 1초에 하나씩 들어오면, 큐잉 대기시간을 거치지 않고 바로 전송
	* 트래픽의 패턴이 burst
	* e.g., rush hour 
	* 평균 큐잉 대기 시간 => 무한대
